<html>
<head>
    <title>OpenLink AJAX Toolkit</title>
    <link rel="STYLESHEET" type="text/css" href="oat.css"/>
  </head>

<div id="oatnav">
    <a href="index.html">Index</a> | 
      <a href="http://oat.openlinksw.com/" target="_new">OAT homepage</a> | 
      <a href="http://www.openlinksw.com/" target="_new">OpenLink Software</a>
  </div>
  <h1>
    OATDOCdatasource</h1>
  <div class="topic-text">
    

    <div class="oatwikitoc">
      <div class="wikitoc">
      <ul>
        <li>
            <a href="#OATDOCdatasource">OATDOCdatasource</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
        <a href="#datasource.js">datasource.js</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#Objects">Objects</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#OAT.DataSource(type)">OAT.DataSource(type)</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#Properties">Properties</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#OAT.DataSource::connection">OAT.DataSource::connection</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#OAT.DataSource::options">OAT.DataSource::options</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#OAT.DataSource::outputFields">OAT.DataSource::outputFields</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#Methods">Methods</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#OAT.DataSource::bindRecord(recordCallback)">OAT.DataSource::bindRecord(recordCallback)</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#OAT.DataSource::bindPage(pageCallback)">OAT.DataSource::bindPage(pageCallback)</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#OAT.DataSource::bindFile(fileCallback)">OAT.DataSource::bindFile(fileCallback)</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#OAT.DataSource::bindEmpty(emptyCallback)">OAT.DataSource::bindEmpty(emptyCallback)</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#OAT.DataSource::bindHeader(headerCallback)">OAT.DataSource::bindHeader(headerCallback)</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#OAT.DataSource::advanceRecord(recordIndex)">OAT.DataSource::advanceRecord(recordIndex)</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#Constants">Constants</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#OAT.DataSourceData.TYPE_SQL">OAT.DataSourceData.TYPE_SQL</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#OAT.DataSourceData.TYPE_SOAP">OAT.DataSourceData.TYPE_SOAP</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#OAT.DataSourceData.TYPE_REST">OAT.DataSourceData.TYPE_REST</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#OAT.DataSourceData.TYPE_SPARQL">OAT.DataSourceData.TYPE_SPARQL</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#OAT.DataSourceData.TYPE_GDATA">OAT.DataSourceData.TYPE_GDATA</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#Examples">Examples</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#REST%20Example">REST
        Example</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#SQL%20Example">SQL
        Example</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#SPARQL%20Example">SPARQL
        Example</a>
          </li>

        <li>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label>
            <label class="c1">_</label> <a href="#GData%20Example">GData
        Example</a>
          </li>
      </ul>
    </div>
    </div>

    

    

    

    <h2>
      <a name="datasource.js" id="datasource.js"> 
      </a>
    datasource.js</h2>

    <p>Is an Ajax Database Connectivity (ADBC) layer. Provides data
    access support for various data sources (SQL, SPARQL, SOAP,
    etc.) and allows binding and execution of callbacks upon data
    arrival. Data are fetched on demand and cached.</p>

    

    <h3>
      <a name="Objects" id="Objects"> 
      </a> Objects</h3>

    

    <h4>
      <a name="OAT.DataSource(type)"> 
      </a>
    OAT.DataSource(type)</h4>

    <p>
      <br/>
    Creates new DataSource object. <tt>type</tt> is one of
    <tt>TYPE_</tt> constants.</p>

    <h3>
      <a name="Properties" id="Properties"> 
      </a> Properties</h3>

    

    <h4>
      <a name="OAT.DataSource::connection" id="OAT.DataSource::connection"> 
      </a>
    OAT.DataSource::connection</h4>

    <p>
      <br/>
    Assigns an <tt>OAT.Connection</tt> object to this
    DataSource .</p>

    <h4>
      <a name="OAT.DataSource::options" id="OAT.DataSource::options"> 
      </a> OAT.DataSource::options</h4>

    <p>Object with various properties, dependent on
    DataSource <tt>TYPE_</tt> :</p>

    <ul>
      <li>
        <strong>
          <tt>TYPE_SQL</tt>
        </strong>
        <br/>
      </li>

      <li>
        <strong>
          <tt>query</tt>
        </strong> - SQL query<br/>
      </li>

      <li>
        <strong>
          <tt>limit</tt>
        </strong> - cursor limit<br/>
      </li>

      <li>
        <strong>
          <tt>cursortype</tt>
        </strong> - 0/1; 0 - snapshot,
      1 - dynaset<br/>
      </li>

      <li>
        <strong>
          <tt>TYPE_SOAP</tt>
        </strong>
        <br/>
      </li>

      <li>
        <strong>
          <tt>service</tt>
        </strong> - name of WSDL
      service<br/>
      </li>

      <li>
        <strong>
          <tt>rootelement</tt>
        </strong> - name of root
      input WSDL element<br/>
      </li>

      <li>
        <strong>
          <tt>inputobj</tt>
        </strong> - input WSDL object
      (see <a href="OATDOCws.html">ws.js</a> documentation for
      details)<br/>
      </li>

      <li>
        <strong>
          <tt>TYPE_REST</tt>
        </strong> ,
      <strong>
          <tt>TYPE_SPARQL</tt>
        </strong> ,
      <strong>
          <tt>TYPE_GDATA</tt>
        </strong>
        <br/>
      </li>

      <li>
        <strong>
          <tt>query</tt>
        </strong> - HTTP GET
      querystring<br/>
      </li>

      <li>
        <strong>
          <tt>output</tt>
        </strong> - 0/1; 0 - xml, 1</li>
    </ul>

    <p>json<br/>
    </p>

    <ul>
      <li>
        <strong>
          <tt>xpath</tt>
        </strong> - bool; how are
      outputFields specified? True</li>
    </ul>

    <p>XPath expressions; False</p>

    <p>node names</p>

    <h4>
      <a name="OAT.DataSource::outputFields" id="OAT.DataSource::outputFields"> 
      </a>
    OAT.DataSource::outputFields</h4>

    <p>
      <br/>
    List of wanted fields in fetched data.</p>

    <h3>
      <a name="Methods" id="Methods"> 
      </a> Methods</h3>

    

    <h4>
      <a name="OAT.DataSource::bindRecord(recordCallback)"> 
      </a>
    OAT.DataSource::bindRecord(recordCallback)</h4>

    <p>
      <br/>
    Listens for new data records. When new record is available,
    <tt>recordCallback</tt> is executed with 2 arguments:
    <tt>record data</tt> and <tt>record index</tt> .</p>

    <h4>
      <a name="OAT.DataSource::bindPage(pageCallback)"> 
      </a>
    OAT.DataSource::bindPage(pageCallback)</h4>

    <p>
      <br/>
    Listens for new data record pages. When new data page (record
    set) is available, <tt>pageCallback</tt> is executed with 2
    arguments: <tt>page data</tt> and <tt>page index</tt> .</p>

    <h4>
      <a name="OAT.DataSource::bindFile(fileCallback)"> 
      </a>
    OAT.DataSource::bindFile(fileCallback)</h4>

    <p>
      <br/>
    Listens for new data file. When new data file is available,
    <tt>fileCallback</tt> is executed with 1 argument: <tt>file
    contents</tt> .</p>

    <h4>
      <a name="OAT.DataSource::bindEmpty(emptyCallback)"> 
      </a>
    OAT.DataSource::bindEmpty(emptyCallback)</h4>

    <p>
      <br/>
    Listens for empty dataset. When empty dataset arrives,
    <tt>emptyCallback</tt> is executed.</p>

    <h4>
      <a name="OAT.DataSource::bindHeader(headerCallback)"> 
      </a>
    OAT.DataSource::bindHeader(headerCallback)</h4>

    <p>
      <br/>
    Listens for data header. When header arrives,
    <tt>headerCallback</tt> is executed with 1 argument: <tt>data
    header</tt> .</p>

    <h4>
      <a name="OAT.DataSource::advanceRecord(recordIndex)"> 
      </a>
    OAT.DataSource::advanceRecord(recordIndex)</h4>

    <p>
      <br/>
    Advances through records. <tt>recordIndex</tt> must be an
    integer.</p>

    <h3>
      <a name="Constants" id="Constants"> 
      </a> Constants</h3>

    

    <h4>
      <a name="OAT.DataSourceData.TYPE_SQL" id="OAT.DataSourceData.TYPE_SQL"> 
      </a>
    OAT.DataSourceData.TYPE_SQL</h4>

    <p>
      <br/>
      <div class="tdl">
    ToBeDone</div>
    </p>

    <h4>
      <a name="OAT.DataSourceData.TYPE_SOAP" id="OAT.DataSourceData.TYPE_SOAP"> 
      </a>
    OAT.DataSourceData.TYPE_SOAP</h4>

    <p>
      <br/>
      <div class="tdl">
    ToBeDone</div>
    </p>

    <h4>
      <a name="OAT.DataSourceData.TYPE_REST" id="OAT.DataSourceData.TYPE_REST"> 
      </a>
    OAT.DataSourceData.TYPE_REST</h4>

    <p>
      <br/>
      <div class="tdl">
    ToBeDone</div>
    </p>

    <h4>
      <a name="OAT.DataSourceData.TYPE_SPARQL" id="OAT.DataSourceData.TYPE_SPARQL"> 
      </a>
    OAT.DataSourceData.TYPE_SPARQL</h4>

    <p>
      <br/>
      <div class="tdl">
    ToBeDone</div>
    </p>

    <h4>
      <a name="OAT.DataSourceData.TYPE_GDATA" id="OAT.DataSourceData.TYPE_GDATA"> 
      </a>
    OAT.DataSourceData.TYPE_GDATA</h4>

    <p>
      <br/>
      <div class="tdl">
    ToBeDone</div>
    </p>

    <h3>
      <a name="Examples" id="Examples"> 
      </a> Examples</h3>

    

    <h4>
      <a name="REST Example"> 
      </a> REST Example</h4>

    
    <pre>
var conn = new OAT.Connection(OAT.ConnectionData.TYPE_REST, {url:"myfile.xml"});

var ds = new OAT.DataSource(OAT.DataSourceData.TYPE_REST);
ds.connection = conn;
ds.options.output = 0; /* fetch result as XML */
ds.options.xpath = 1; /* outputFields are specified as XPATH expressions */
ds.outputFields = ['//result/binding[@name="created"]/node()/text()',
                                        '//result/binding[@name="creator"]/node()/text()',
                                        '//result/binding[@name="item_title"]/node()/text()',
                                        '//result/binding[@name="url"]/node()/text()'];

var recordCallback = function(data, index) {
        alert('Data at index ' + index + ':\n' + data );
}
ds.bindRecord(recordCallback);
ds.advanceRecord(0);

</pre>

    

    <h4>
      <a name="SQL Example"> 
      </a> SQL Example</h4>

    
    <pre>
var conn = new OAT.Connection(OAT.ConnectionData.TYPE_XMLA, {dsn:"DSN=Local_Instance",endpoint:"/XMLA"});

var ds = new OAT.DataSource(OAT.DataSourceData.TYPE_SQL);
ds.connection = conn;
ds.options.query = "SELECT OrderID, CustomerID, EmployeeID FROM Demo.demo.Orders";

var recordCallback = function(data, index) {
        alert('Data at index ' + index + ':\n' + data );
}
ds.bindRecord(recordCallback);
ds.advanceRecord(0);

</pre>

    

    <h4>
      <a name="SPARQL Example"> 
      </a> SPARQL Example</h4>

    
    <pre>
var connection = new OAT.Connection(OAT.ConnectionData.TYPE_REST,{url:"/sparql/"});
var q = "SELECT ?s, ?p, ?o FROM &lt;http://www.flickr.com/search/?q=rdf+semanticweb&amp;s=rec&gt; WHERE { ?s ?p ?o . }";

var ds = new OAT.DataSource(OAT.DataSourceData.TYPE_SPARQL);
ds.outputFields = ['//result/binding[@name="s"]/node()/text()',
   '//result/binding[@name="p"]/node()/text()',
   '//result/binding[@name="o"]/node()/text()'];

ds.connection = connection;
ds.options.query = "query="+encodeURIComponent(q)+"&amp;format=xml";
ds.options.output = 0; /* fetch result as XML */
ds.options.xpath = 1; /* outputFields are specified as XPATH expressions */

var recordCallback = function(data, index) {
        alert('Data at index ' + index + ':\n' + data );
}
ds.bindRecord(recordCallback);
ds.advanceRecord(0);

</pre>

    

    <h4>
      <a name="GData Example"> 
      </a> GData Example</h4>

    
    <pre>
var conn = new OAT.Connection(OAT.ConnectionData.TYPE_REST, {url:"gdata.xml"});

var ds = new OAT.DataSource(OAT.DataSourceData.TYPE_GDATA);
ds.connection = conn;
ds.options.output = 0;
ds.options.xpath = 1;
ds.outputFields = [ "//atom:feed/atom:entry/atom:title" ];

var recordCallback = function(data, index) {
        alert('Data at index ' + index + ':\n' + data );
}

ds.bindRecord(recordCallback);
ds.advanceRecord(0);

</pre>

    

    
    <hr/>
  </div>
<div id="oatcopy">
      Copyright (C) 2005-2008
      <a href="http://www.openlinksw.com/">OpenLink Software</a>
  </div>
</html>
